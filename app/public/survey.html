<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
  <link href="../css/style.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery.js"></script>
  <title>Album Friend - Survey</title>
</head>
<body>
  <div class='container'>
    <div class='card-panel red lighten-1 col s12 center-align'>
      <h4><strong>Album Survey Questions</strong></h4>
        <div class='card-panel left-align white'>
          <h5><strong>About You</strong></h5>
          <br>
          <form action=" ">
            <section class='input-field'>
              <input id="name" type="text" class="validate" required>
              <label class='active' for="name">Name (required)</label>
            </section>
            <section class='input-field'>
              <input id="photo" type="text" class="validate" required>
              <label class='active' for="name">Link to Photo Image (required)</label>
            </section>

            <h5><strong>Question 1</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q1" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            
            <h5><strong>Question 2</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q2" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 3</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q3" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 4</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q4" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 5</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q5" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 6</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q6" required>
              <option value="" disabled selected>Choose an Option</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
            <label>Select One</label>

            <h5><strong>Question 7</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q7" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 8</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q8" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 9</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q9" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h5><strong>Question 10</strong></h5>
            <p></p>
            <select data-placeholder="" class="browser-default" id="q10" required>
                <option value="" disabled selected>Choose an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
              <a href='' class="waves-effect waves-light btn black lighten-1" id="submitBtn">Submit</a>
          </form>
        </div>
    </div>
    <div class='col s4'>
      <p><a href='/api/friends' class="black-text">API Friends List</a> | <a href='https://github.com/rjkinhighlands/Friend-Finder' target= '_blank' class="black-text">GitHub Repo</a></p>
    </div>
  </div>
</body>
</html>

<!-- Grabs information and sends it to server -->
<script type="text/javascript">

  $("#submitBtn").on("click", function(){

    //make sure that everything is filled in
    function validateForm(){
      var isValid = true;

      $('.validate').each(function(){
        if($(this).val === ''){
          isValid = false;
        }
      });

      $('.browser-default').each(function(){
        if($(this).val === ''){
          isValid = false;
        }
      });
      return isValid;
    }

    //if everything was filled
    if(validateForm() == true){
      var newFriend = {
      name: $('#name').val().trim(),
      profilePic: $('#photo').val().trim(),
      scores: [
        $('#q1').val(),
        $('#q2').val(),
        $('#q3').val(),
        $('#q4').val(),
        $('#q5').val(),
        $('#q6').val(),
        $('#q7').val(),
        $('#q8').val(),
        $('#q9').val(),
        $('#q10').val(),
      ]
      };

      console.log(newFriend);

      var currentURL = window.location.origin;

      $.post(currentURL + "/api/friends", newFriend,
      function(data){
          alert("You were added. Wait while we find you a match!");
      });
    } else{
      alert("Please fill all fields before submitting!")
    }
    return false;
  });